<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Προβολή Θέματος</title>
<style>
body{font-family:Arial; max-width:700px; margin:auto; padding:1rem;}
h2{text-align:center;}
#topicDetails{margin-top:1rem; border:1px solid #ccc; padding:1rem; border-radius:8px;}
h3{margin-top:1rem;}
</style>
</head>
<body>
<h2>Προβολή Θέματος</h2>
<div id="topicDetails">Φόρτωση...</div>

<button onclick="window.location.href='student_dashboard.html'">Επιστροφή</button>

<script>
fetch('../../api/student/get_student_topic.php')
.then(res => res.json())
.then(data => {
    const div = document.getElementById('topicDetails');
    if(!data.success){
        div.innerHTML = "<p style='color:red'>" + data.message + "</p>";
        return;
    }

    let html = `
        <h3>${data.topic.title}</h3>
        <p><strong>Περιγραφή:</strong> ${data.topic.summary}</p>
        <p><strong>Αρχείο:</strong> <a href="${data.topic.pdf_path}" target="_blank">Λήψη PDF</a></p>
        <p><strong>Κατάσταση:</strong> ${data.thesis.status}</p>
    `;

    if(data.thesis.assignment_date){
        html += `<p><strong>Ημέρες από ανάθεση:</strong> ${data.days_since_assignment} ημέρες</p>`;
    }

    if(data.committee && data.committee.length > 0){
        html += "<h3>Τριμελής Επιτροπή</h3><ul>";
        data.committee.forEach(m => {
            html += `<li>${m.first_name} ${m.last_name} (${m.role}, ${m.status})</li>`;
        });
        html += "</ul>";
    }

    div.innerHTML = html;
})
.catch(err=>{
    document.getElementById('topicDetails').innerHTML = "<p style='color:red'>Σφάλμα φόρτωσης.</p>";
});
</script>
</body>
</html>
